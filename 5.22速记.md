5月22日

1、Java内存模型

线程私有的：栈、本地方法区、程序计数器

线程共享的：堆、方法区

堆空间是线程共享的，一定会存在并发问题，但是由于每个线程都有自己的本地缓存，导致线程之间读取的数据可能不是最新的，出现数据不一致的问题。JMM是定义了一种内存模型，用于描述Java程序中多线程之间如何访问共享内存中的变量

![image-20230522161538235](https://typora--cr--images.oss-cn-beijing.aliyuncs.com/image-20230522161538235.png)

JMM解决的问题是：

可见性：JMM保证对于一个线程对变量的修改，其他线程能够立即看到这个修改，避免了线程之间读取数据不一致问题。也就是防止脏读

有序性：

原子性：指的是单个变量读写操作是原子性的，也就是说不会出现数据竞争的问题，JMM的原子性是通过synchronized关键字和volatile关键字保证实现的



2、怎么设置堆内存大小

通过参数设置，使用-Xmx和-Xms



3、Java引用和C中的指针有什么区别

Java中的数据分为两类，基本类型和引用类型。基本类型数据没有引用，只有引用数据类型才有引用。引用类型在分配内存时会分配两块空间，一块存储引用，一块存储值。引用分配在哪里看变量的类型，局部变量（线程私有）放在栈，非局部变量放在堆（线程共享）

1. C语言的指针存的是某块地址的值。只关注内存地址，不关心内存存的是什么，如果该地址中的对象搬走了，指针不会自动改变指向。

​		Java的引用存的也是一个值，但是这个值存的是某个值对应在内存中的地址，也就是说如果这个对象搬走了，引用中的值是会跟着改的。

2. C语言的指针可以认为是一个int类型的，长度一般是计算机字长。Java引用初始值是一个null，也就是说只声明不赋值的情况下是null，赋值之后可以认为是一个字符串。

3. Java的引用不能计算，C语言的指针可以参数运算，比如++、--啥的



4、Stream流

1. stream流是对容器功能进行了一个增强，添加了很多比较方便的操作，比如：查找、过滤、排序等操作。Stream流不存储数据，只是按照特定的规则对数据进行计算，一般会输出结果。它的操作思想就是将集合/数组转换成Stream流，然后用Stream提供的方法对数据进行计算，最终得到一个流或者一个集合
2. 获取流有两种方法

​			1、所有Collection集合都可以通过`stream()`方法得到一个流对象

```
Stream<String> stream = list.stream();
```

​			2、通过Stream类的一个静态方法(直接类名.方法名)得到流（传一个数组）

```
Stream.of(arr)
```

3. 常用方法

> stream的方法分两种，延迟方法和终结方法。延迟方法的返回值仍然是一个流，终结方法的返回值不是流，一般是集合啥的。

```
foreach()

filter()

map()

count()

limit()

skip()

concat()
```

